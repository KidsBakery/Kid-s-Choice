<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Kid's Choice Cakes & Chocolates — Bakery</title>
<meta name="description" content="Kid's Choice Cakes & Chocolates — In-store pickup only." />
<link rel="icon" href="data:," />
<style>
    /* ===== Mobile Friendly CSS ===== */
html, body {
  max-width: 100%;
  overflow-x: hidden; /* Prevent sideways scroll */
}

/* Make all images and videos responsive */
img, video {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Responsive text sizes */
h1, h2, h3, h4, h5, h6 {
  word-wrap: break-word;
}

/* General container adjustments */
.container {
  width: 100%;
  max-width: 1200px; /* Keep desktop look */
  margin: 0 auto;
  padding: 0 10px;
}

/* Mobile adjustments */
@media (max-width: 768px) {
  body {
    font-size: 15px;
  }

  header, nav, section, footer {
    padding: 10px;
  }

  .container {
    padding: 0 8px;
  }

  /* Example: stack columns instead of side-by-side */
  .row {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
}

@media (max-width: 480px) {
  body {
    font-size: 14px;
  }

  h1 {
    font-size: 1.5rem;
  }

  button, input {
    width: 100%; /* Full width controls */
  }
}

:root{
  --bg:#fff8fb;
  --card:#ffffff;
  --muted:#6b7280;
  --accent:#ff6fa3;
  --accent-2:#ffd28a;
  --accent-3:#9fe6c8;
  --text:#111827;
  --glass: rgba(255,255,255,0.7);
  --radius:14px;
  --shadow: 0 12px 30px rgba(10,14,20,0.06);
  --maxw:1200px;
  --ease: cubic-bezier(.2,.9,.3,1);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial;
  background:linear-gradient(180deg,#fffaf8 0%, #fff1f6 60%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  line-height:1.4;
  display:flex;flex-direction:column;min-height:100vh;
}

/* header */
.header{
  position:sticky;top:0;z-index:90;background:rgba(255,255,255,0.9);
  backdrop-filter:blur(6px);border-bottom:1px solid rgba(0,0,0,0.03);
  display:flex;align-items:center;justify-content:space-between;padding:12px 20px;
}
.brand{display:flex;align-items:center;gap:12px}
.logo{
  display:flex;flex-direction:column;line-height:1;
}
.logo strong{font-size:18px}
.logo small{font-size:11px;color:var(--muted)}
.header .nav{display:flex;gap:14px;align-items:center}
.header .nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:10px;font-weight:600}
.header .nav a:hover{background:rgba(0,0,0,0.02);color:var(--text)}
.header .right{display:flex;gap:10px;align-items:center}

/* intro overlay (Netflix-like) */
.intro{
  position:fixed;inset:0;background:linear-gradient(180deg,#fffaff 0%, #fff0f6 60%);
  display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:9999;
  overflow:hidden;
}
#introCanvas{position:absolute;inset:0;width:100%;height:100%}
.intro .mascot{
  width:160px;height:160px;border-radius:999px;background:linear-gradient(180deg,#fff,#ffeef6);
  display:flex;align-items:center;justify-content:center;box-shadow:0 18px 50px rgba(10,14,30,0.08);
  transform:scale(0.75);opacity:0;will-change:transform,opacity;
}
.intro .mascot img{width:86%;height:86%;object-fit:contain}
.intro .title{
  font-weight:900;font-size:28px;margin-top:18px;color:var(--accent);
  opacity:0;transform:translateY(8px);
  text-align:center;text-shadow:0 6px 30px rgba(255,111,163,0.08);
  letter-spacing:-0.6px;
}
.intro .tag{margin-top:8px;color:var(--muted);opacity:0;transform:translateY(8px);font-weight:600}

/* main container */
.container{max-width:var(--maxw);margin:0 auto;width:100%;padding:22px}
.hero{
  display:flex;gap:18px;align-items:center;justify-content:space-between;margin-top:18px;
}
.hero-left{flex:1}
.hero-right{width:380px;min-width:220px;border-radius:16px;background:linear-gradient(180deg,#fff,#fffaf2);padding:18px;box-shadow:var(--shadow)}
.hero h1{font-size:34px;margin:0 0 8px 0}
.hero p{margin:0;color:var(--muted);font-weight:600}
.badges{display:flex;gap:8px;margin-top:12px}
.badge{background:linear-gradient(90deg,#fff,#fff8f8);padding:6px 10px;border-radius:999px;font-weight:700;color:var(--muted);box-shadow:0 6px 20px rgba(10,14,30,0.03)}

/* toolbar & search */
.toolbar{display:flex;gap:12px;margin-top:18px;align-items:center;flex-wrap:wrap}
.search{flex:1;display:flex;gap:8px;align-items:center}
.search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(0,0,0,0.06);font-size:15px}
.select, .filters{display:flex;gap:8px;align-items:center}

/* product grid */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px;margin-top:20px}
.card{background:linear-gradient(180deg,#fff,#fffaf2);border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px}
.card .media{height:160px;border-radius:10px;background-size:cover;background-position:center}
.card h3{margin:0;font-size:16px}
.card .desc{color:var(--muted);font-size:14px}
.card .meta{display:flex;justify-content:space-between;align-items:center;margin-top:auto}
.price{font-weight:900;color:var(--accent)}
.actions{display:flex;gap:8px}

/* modals/panels */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,7,18,0.45);z-index:1200}
.modal[aria-hidden="false"]{display:flex}
.panel{background:white;border-radius:12px;padding:18px;width:min(720px,96%);box-shadow:0 20px 60px rgba(2,6,23,0.5);max-height:86vh;overflow:auto}

/* wishlist panel */
.sidepanel{position:fixed;right:16px;top:80px;background:white;border-radius:12px;padding:12px;box-shadow:var(--shadow);width:320px;display:none;z-index:1100}
.sidepanel[aria-hidden="false"]{display:block}

/* gallery */
.gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;margin-top:12px}
.gallery img{width:100%;height:110px;object-fit:cover;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.06)}

/* footer */
.footer{margin-top:auto;padding:22px 0;text-align:center;color:var(--muted);font-size:14px}

/* small devices */
@media (max-width:900px){
  .hero{flex-direction:column}
  .hero-right{width:100%}
  .grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}
}
/* Button color */
button {
  background: linear-gradient(135deg, #ff758c, #ff7eb3);
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

button:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
#sortSelect{
  background: linear-gradient(135deg, #ff758c, #ff7eb3);
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

#sortSelect:hover{
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}

/* Make header responsive */
.header {
  flex-wrap: wrap;   /* allow content to drop to next line */
}

/* close wishlist button */
.mobile-only {
  display: none;
  margin-top: 10px;
  width: 100%;
}

@media (max-width: 600px) {
  .mobile-only {
    display: block;
  }
}

/* Nav links shrink on small screens */
@media (max-width: 600px) {
  .header .nav a {
    font-size: 13px;
    padding: 6px 8px;
  }

  .header .right {
    width: 100%;              /* force full width row */
    justify-content: center;  /* center buttons under nav */
    margin-top: 6px;
  }

  .header .right button {
    font-size: 13px;
    padding: 6px 10px;
  }

  .logo strong {
    font-size: 16px;
  }
}
/* skip intro for mobile */
@media (max-width: 480px) {
  #skipIntro {
    width: auto;   /* Don’t stretch */
    right: 12px;
    top: 12px;
  }
}



/* animations — functional and accessible */
.show{opacity:1;transform:none;transition:transform 700ms var(--ease),opacity 420ms var(--ease)}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}
</style>
</head>
<body>

<div class="intro" id="intro" role="dialog" aria-label="Intro animation">
  <canvas id="introCanvas" aria-hidden="true"></canvas>
  <div class="mascot" aria-hidden="true"><img src="logo.png" alt="logo"></div>
  <div class="title" id="introTitle" aria-hidden="true">Kid's Choice Cakes & Chocolates</div>
  <div class="tag" id="introTag" aria-hidden="true">Freshly baked smiles — In-store pickup only</div>
  <button id="skipIntro" style="position:absolute;right:18px;top:18px;padding:8px 12px;border-radius:8px;font-weight:700">Skip</button>
</div>

<header class="header" role="banner">
  <div class="brand" role="img" aria-label="Kid's choice brand">
    <div class="logo"><strong>Kid's choice</strong><small>cakes & chocolates</small></div>
  </div>
  <nav class="nav" aria-label="Main navigation">
    <a href="#menu">Menu</a>
    <a href="#gallery">Gallery</a>
    <!-- <a href="#workshops">Workshops</a> -->
    <a href="#about">About</a>
    <a href="#visit">Visit</a>
  </nav>
  <div class="right">
    <div class="badge" title="No home delivery">❌ No Home Delivery</div>
    <button id="openWishlist" aria-pressed="false" title="Wishlist">♡ Wishlist</button>
    <button id="openAccount">Account</button>
  </div>
</header>

<main class="container" id="mainContent" aria-live="polite" hidden>
  <section class="hero" aria-labelledby="heroTitle">
    <div class="hero-left">
      <h1 id="heroTitle">Baked for smiles — made with love</h1>
      <p>Signature cakes • Donuts • Handcrafted chocolates • Pickup at counter</p>
      <div class="badges"><span class="badge">In-store pickup</span><span class="badge" style="background:linear-gradient(90deg,#ffd28a,#ffb6d5)">No Home Delivery</span></div>
      <div class="toolbar">
        <div class="search">
          <input id="searchInput" placeholder="Search cakes, donuts, chocolates..." aria-label="Search menu">
        </div>
        <div class="select">
          <select id="sortSelect" aria-label="Sort products">
            <option value="popular" style="color: black;">Most popular</option>
            <option value="price-asc" style="color: black;">Price low → high</option>
            <option value="price-desc" style="color: black;">Price high → low</option>
            <option value="new" style="color: black;">Newest</option>
          </select>
        </div>
        <div class="filters" role="group" aria-label="Filters">
          <label><input type="checkbox" value="kids" class="filterCheck"> Kids</label>
          <label><input type="checkbox" value="eggless" class="filterCheck"> Eggless</label>
          <label><input type="checkbox" value="vegan" class="filterCheck"> Vegan</label>
        </div>
      </div>
    </div>
    <aside class="hero-right" aria-hidden="true">
      <div style="font-weight:800;font-size:18px;margin-bottom:10px">Spotlight</div>
      <div id="spotlight" style="height:200px;border-radius:12px;overflow:hidden;background:linear-gradient(180deg,#fff6f9,#fff1f0);display:flex;align-items:center;justify-content:center;flex-direction:column">
        <div id="spotName" style="font-weight:900;color:var(--accent)">Chocolate truffle cake</div>
        <div id="spotPrice" style="color:var(--muted);margin-top:6px">₹800</div>
        <div style="margin-top:12px"><button id="spotPrev">‹</button><button id="spotNext">›</button></div>
      </div>
    </aside>
  </section>

  <section id="menu" aria-labelledby="menuHead">
    <h2 id="menuHead">Our Menu</h2>
    <div class="grid" id="productGrid" role="list"></div>
    <div style="margin-top:18px;display:flex;gap:8px;justify-content:center;">
      <button id="loadMore">Load more</button>

    </div>
  </section>

  <!-- <section id="workshops" aria-labelledby="workHead" style="margin-top:26px">
    <h2 id="workHead">Workshops & Events</h2>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px">
      <div style="background:white;padding:12px;border-radius:12px;box-shadow:var(--shadow)">
        <h3>Kids Cake Decorating</h3>
        <p>Saturday 10:30 — All materials included. Book in-store.</p>
        <div style="display:flex;gap:8px"><button class="bookBtn" data-event="cake">Reserve</button></div>
      </div>
      <div style="background:white;padding:12px;border-radius:12px;box-shadow:var(--shadow)">
        <h3>Chocolates</h3>
        <p>Monthly workshop for adults & teens. In-store reservation required.</p>
        <div style="display:flex;gap:8px"><button class="bookBtn" data-event="truffle">Reserve</button></div>
      </div>
    </div>
  </section> -->

  <section id="gallery" aria-labelledby="galleryHead" style="margin-top:26px">
    <h2 id="galleryHead">Gallery</h2>
    <div class="gallery" id="galleryGrid"></div>
  </section>

  <section id="about" aria-labelledby="aboutHead" style="margin-top:26px">
    <h2 id="aboutHead">About Us</h2>
    <p>Kid's Choice Cakes & Chocolates is a neighborhood bakery focused on making celebrations sweeter. We prioritize fresh in-store pickup experiences and hands-on workshops. No home delivery.</p>
  </section>

  <section id="visit" aria-labelledby="visitHead" style="margin-top:26px">
    <h2 id="visitHead">Visit</h2>
    <address>
      Bhuifowanath temple, Pethe wali gali, Bharatpuri colony, Lakhimpur Kheri<br>
      Open daily: 9:00 AM — 9:00 PM<br>
      Call: +91-9554928655
    </address>
    <div style="margin-top:10px"><button id="getDirections">Get directions</button><button id="callShop">Call</button></div>
  </section>

  <div class="footer">© <span id="curYear"></span> Kid's Choice Cakes & Chocolates</div>
</main>

<!-- Modals -->
<div class="modal" id="productModal" aria-hidden="true" role="dialog" aria-labelledby="productModalTitle">
  <div class="panel" role="document">
    <h3 id="productModalTitle">Item</h3>
    <div id="productModalBody"></div>
    <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end"><button id="modalClose">Close</button><button id="addToWishlist">Add to wishlist</button></div>
  </div>
</div>

<div class="modal" id="accountModal" aria-hidden="true" role="dialog" aria-labelledby="accountTitle">
  <div class="panel">
    <h3 id="accountTitle">Account</h3>
    <form id="accountForm">
      <label style="display:block;margin-top:8px">Name<input id="accName" name="name" placeholder="Your name" style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)"></label>
      <label style="display:block;margin-top:8px">Phone<input id="accPhone" name="phone" placeholder="+91" style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)"></label>
      <label style="display:block;margin-top:8px">Email<input id="accEmail" name="email" placeholder="you@example.com" style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)"></label>
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end"><button type="submit">Save</button><button type="button" id="accCancel">Cancel</button></div>
    </form>
  </div>
</div>

<div class="sidepanel" id="wishlistPanel" aria-hidden="true" role="complementary">
  <h3>Wishlist</h3>
  <div id="wishItems" style="margin-top:10px"></div>
  <div style="margin-top:12px;display:flex;gap:8px;justify-content:flex-end"><button id="clearWishlist">Clear</button></div>
  <button id="closeWishlistMobile" class="mobile-only">✖ Close</button>
</div>

<!-- lightbox -->
<div class="modal" id="lightbox" aria-hidden="true" role="dialog">
  <div class="panel" style="max-width:980px;display:flex;flex-direction:column;align-items:center">
    <img id="lbImg" src="" alt="" style="max-width:100%;border-radius:12px">
    <div id="lbCaption" style="margin-top:8px;color:var(--muted)"></div>
    <div style="margin-top:12px"><button id="lbClose">Close</button></div>
  </div>
</div>

<script>
/* Utilities */
const qs = (s, ctx=document)=>ctx.querySelector(s);
const qsa = (s, ctx=document)=>Array.from(ctx.querySelectorAll(s));
const el = (t, a={})=>{const e=document.createElement(t);Object.entries(a).forEach(([k,v])=>{if(k==='html') e.innerHTML=v; else if(k==='class') e.className=v; else e.setAttribute(k,v)});return e}

/* Data: generate a catalog of items (meaningful entries) */
const catalog = (function(){
  const base = [
    {id:'p001',title:'Simple Vanilla Cake',cat:'cakes',price:700,tags:['kids'],desc:'Rich layered chocolate cake with fudge frosting.'},
    {id:'p002',title:'Dry Cake',cat:'cakes',price:300,tags:['kids'],desc:'Colorful layers, surprise inside. Per dozen.'},
    {id:'p003',title:'Banana Cake',cat:'cakes',price:620,tags:['gift'],desc:'Hand-painted truffles in seasonal flavors.'},
    {id:'p004',title:'Carrot cake',cat:'cakes',price:300,tags:['classic'],desc:'Classic vanilla sponge with Swiss buttercream.'},
    {id:'p005',title:'Simple Chocolate Cake Cake',cat:'cakes',price:700,tags:['custom'],desc:'Design your cake with an in-store consultation.'},
    {id:'p006',title:'Nutty cake',cat:'cakes',price:250,tags:[],desc:'Nutty cake with fudge topping.'}
  ];
  
  const generated = [...base];
  for(let i=7;i<=50;i++){
    const n = i.toString().padStart(3,'0');
    const cat = i%3===0 ? 'cakes' : (i%3===1 ? 'cakes' : 'chocolates');
    // const title = cat==='cakes' ? `Deluxe Cake ${i}` : (cat==='cupcakes' ? `Special Cakes ${i}` : `Chocolate balls ${i}`);
    // generated.push({id:'p'+n,title,cat,price:Math.round(200 + Math.random()*3000),tags: (i%7===0?['vegan']:[]),desc:`Tasty ${title} — handcrafted.`});
  }
  return generated;
})();

/* initial app state */
const App = {
  products: catalog,
  visibleCount: 12,
  wishlist: JSON.parse(localStorage.getItem('kc_wishlist')||'[]'),
  account: JSON.parse(localStorage.getItem('kc_account')||'null'),
  spotlightIndex:0,
  spotlightTimer:null
};

/* DOM refs */
const mainContent = qs('#mainContent');
const intro = qs('#intro');
const introCanvas = qs('#introCanvas');
const introTitle = qs('#introTitle');
const introTag = qs('#introTag');
const mascot = qs('.mascot');
const skipBtn = qs('#skipIntro');
const productGrid = qs('#productGrid');
const loadMoreBtn = qs('#loadMore');
const searchInput = qs('#searchInput');
const sortSelect = qs('#sortSelect');
const filterChecks = qsa('.filterCheck');
const productModal = qs('#productModal');
const productModalBody = qs('#productModalBody');
const productModalTitle = qs('#productModalTitle');
const modalClose = qs('#modalClose');
const addToWishlistBtn = qs('#addToWishlist');
const wishlistPanel = qs('#wishlistPanel');
const openWishlistBtn = qs('#openWishlist');
const wishItemsDiv = qs('#wishItems');
const clearWishlistBtn = qs('#clearWishlist');
const accountModal = qs('#accountModal');
const openAccountBtn = qs('#openAccount');
const accountForm = qs('#accountForm');
const accName = qs('#accName');
const accPhone = qs('#accPhone');
const accEmail = qs('#accEmail');
const accCancel = qs('#accCancel');
const galleryGrid = qs('#galleryGrid');
const lb = qs('#lightbox');
const lbImg = qs('#lbImg');
const lbCaption = qs('#lbCaption');
const lbClose = qs('#lbClose');
const spotPrev = qs('#spotPrev');
const spotNext = qs('#spotNext');
const spotName = qs('#spotName');
const spotPrice = qs('#spotPrice');
const spotlight = qs('#spotlight');
const loadMore = qs('#loadMore');
// const exportDataBtn = qs('#exportData');
// const importDataBtn = qs('#importData');
const bookBtns = qsa('.bookBtn');
const getDirections = qs('#getDirections');
const callShop = qs('#callShop');
const curYear = qs('#curYear');

/* set year */
if(curYear) curYear.textContent = new Date().getFullYear();

/* rendering functions */
function renderProducts(reset=false){
  if(reset) productGrid.innerHTML='';
  const q = (searchInput.value||'').toLowerCase();
  const filters = filterChecks.filter(f=>f.checked).map(f=>f.value);
  let list = App.products.slice();
  if(q) list = list.filter(p => p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
  if(filters.length) list = list.filter(p=> filters.every(f=>p.tags.includes(f)));
  const sort = sortSelect.value;
  if(sort==='price-asc') list.sort((a,b)=>a.price-b.price);
  else if(sort==='price-desc') list.sort((a,b)=>b.price-a.price);
  else if(sort==='new') list = list.slice().reverse();
  const toShow = list.slice(0,App.visibleCount);
  productGrid.innerHTML='';
  toShow.forEach(p=>{
    const card = el('div',{class:'card','role':'listitem'});
    const media = el('div',{class:'media'});
    const hue = Math.floor(Math.random()*40)+320;
    media.style.backgroundImage = `linear-gradient(180deg,hsl(${hue}deg 90% 85%), hsl(${hue}deg 60% 70%)), url('https://via.placeholder.com/600x400/${Math.floor(Math.random()*900000).toString(16)}/fff?text=${encodeURIComponent(p.title)}')`;
    const h = el('h3',{html:p.title});
    const d = el('div',{class:'desc',html:p.desc});
    const meta = el('div',{class:'meta'});
    const pr = el('div',{class:'price',html: '₹' + p.price});
    const actions = el('div',{class:'actions'});
    const detailsBtn = el('button',{html:'Details'});
    detailsBtn.addEventListener('click',()=>openProductModal(p));
    const wishBtn = el('button',{html: App.wishlist.includes(p.id)?'♥':'♡' });
    wishBtn.addEventListener('click',()=>toggleWishlist(p.id,wishBtn));
    actions.appendChild(detailsBtn);actions.appendChild(wishBtn);
    meta.appendChild(pr);
    card.appendChild(media);card.appendChild(h);card.appendChild(d);card.appendChild(meta);card.appendChild(actions);
    productGrid.appendChild(card);
  });
}

/* modal control */
let activeProduct=null;
function openProductModal(p){
  activeProduct = p;
  productModalTitle.textContent = p.title;
  productModalBody.innerHTML = `<div style="display:flex;gap:12px"><div style="flex:1"><img src="https://via.placeholder.com/420x300" alt="${p.title}" style="width:100%;border-radius:8px"></div><div style="flex:1"><p style="color:var(--muted)">${p.desc}</p><p style="font-weight:900;margin-top:8px">₹${p.price}</p><p style="margin-top:8px"><strong>Pickup only — No Home Delivery</strong></p></div></div>`;
  productModal.setAttribute('aria-hidden','false');
}
modalClose.addEventListener('click',()=>productModal.setAttribute('aria-hidden','true'));
addToWishlistBtn.addEventListener('click',()=>{
  if(activeProduct) { addToWishlist(activeProduct.id); productModal.setAttribute('aria-hidden','true'); }
});

/* wishlist functions */
function saveWishlist(){
  localStorage.setItem('kc_wishlist', JSON.stringify(App.wishlist));
}
function addToWishlist(id){
  if(!App.wishlist.includes(id)) App.wishlist.push(id);
  saveWishlist(); renderWishlist();
}
function removeFromWishlist(id){
  App.wishlist = App.wishlist.filter(x=>x!==id); saveWishlist(); renderWishlist();
}
function toggleWishlist(id, btn){
  if(App.wishlist.includes(id)){ removeFromWishlist(id); if(btn) btn.textContent='♡'; }
  else{ addToWishlist(id); if(btn) btn.textContent='♥'; }
}
function renderWishlist(){
  wishItemsDiv.innerHTML='';
  if(App.wishlist.length===0){ wishItemsDiv.innerHTML = '<div style="color:var(--muted)">No items yet</div>'; return; }
  App.wishlist.forEach(id=>{
    const p = App.products.find(x=>x.id===id);
    if(!p) return;
    const row = el('div',{html:`<div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0"><div><strong>${p.title}</strong><div style="color:var(--muted);font-size:13px">₹${p.price}</div></div><div><button data-id="${p.id}" class="wishRemove">Remove</button></div></div>`});
    wishItemsDiv.appendChild(row);
  });
  qsa('.wishRemove', wishItemsDiv).forEach(b=>b.addEventListener('click', e=> removeFromWishlist(b.getAttribute('data-id'))));
}
openWishlistBtn.addEventListener('click', ()=>{
  const pressed = openWishlistBtn.getAttribute('aria-pressed')==='true';
  openWishlistBtn.setAttribute('aria-pressed', String(!pressed));
  if(!pressed) wishlistPanel.setAttribute('aria-hidden','false'); else wishlistPanel.setAttribute('aria-hidden','true');
  renderWishlist();
});
clearWishlistBtn.addEventListener('click', ()=>{ App.wishlist=[]; saveWishlist(); renderWishlist(); });

/* account */
if(App.account){ accName.value = App.account.name || ''; accPhone.value = App.account.phone||''; accEmail.value=App.account.email||''; }
openAccountBtn.addEventListener('click', ()=> accountModal.setAttribute('aria-hidden','false'));
accCancel.addEventListener('click', ()=> accountModal.setAttribute('aria-hidden','true'));
accountForm.addEventListener('submit', e=>{ e.preventDefault(); App.account={name:accName.value,phone:accPhone.value,email:accEmail.value}; localStorage.setItem('kc_account', JSON.stringify(App.account)); accountModal.setAttribute('aria-hidden','true'); });

/* gallery data & lightbox */
const galleryItems = [];
for(let i=1;i<=12;i++){
  galleryItems.push({src:`https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcStaxodtN-Ct7vu4ad_03QPT_hVd35NRf66vA&s`,caption:`Gallery item ${i}`});
  galleryItems.push({src:`data:image/jpeg;base64,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`,caption:`Gallery item ${i}`});
  galleryItems.push({src:`logo.png`,caption:`Gallery item ${i}`});
  
}
function renderGallery(){
  galleryGrid.innerHTML='';
  galleryItems.forEach((g,idx)=>{
    const f = el('figure',{html:`<img src="${g.src}" alt="${g.caption}" loading="lazy">`});
    f.querySelector('img').style.height='110px';
    f.addEventListener('click', ()=> openLightbox(g));
    galleryGrid.appendChild(f);
  });
}
function openLightbox(g){
  lbImg.src=g.src; lbCaption.textContent=g.caption; lb.setAttribute('aria-hidden','false');
}
lbClose.addEventListener('click', ()=> lb.setAttribute('aria-hidden','true'));

/* search, sort, filters */
searchInput.addEventListener('input', ()=> renderProducts(true));
sortSelect.addEventListener('change', ()=> renderProducts(true));
filterChecks.forEach(ch=>ch.addEventListener('change', ()=> renderProducts(true)));

/* load more & export/import */
loadMoreBtn.addEventListener('click', ()=>{ App.visibleCount += 12; renderProducts(); });

/* spotlight carousel */
function updateSpotlight(){
  const p = App.products[App.spotlightIndex % App.products.length];
  spotName.textContent = p.title;
  spotPrice.textContent = '₹' + p.price;
}
spotPrev.addEventListener('click', ()=>{ App.spotlightIndex = (App.spotlightIndex - 1 + App.products.length)%App.products.length; updateSpotlight(); });
spotNext.addEventListener('click', ()=>{ App.spotlightIndex = (App.spotlightIndex + 1)%App.products.length; updateSpotlight(); });
function startSpotlight(){ if(App.spotlightTimer) clearInterval(App.spotlightTimer); App.spotlightTimer = setInterval(()=>{ App.spotlightIndex = (App.spotlightIndex+1)%App.products.length; updateSpotlight(); },4200); }
startSpotlight();

/* booking buttons */
bookBtns.forEach(b=>b.addEventListener('click', e=>{
  const ev = b.getAttribute('data-event');
  const name = prompt(`Enter your name to reserve for ${ev} workshop:`);
  if(name){ alert(`Thanks ${name}. Your reservation for ${ev} is noted. Please visit the store to confirm and pay.`) }
}));

/* directions & call */
getDirections.addEventListener('click', ()=> window.open("https://www.google.com/maps/place/27%C2%B057'24.3%22N+80%C2%B046'38.1%22E/@27.95675,80.7770218,21z/data=!4m4!3m3!8m2!3d27.956757!4d80.777255?entry=ttu&g_ep=EgoyMDI1MDgxOS4wIKXMDSoASAFQAw%3D%3D"));
  //callShop.addEventListener('click', ()=> window.location.href = 'tel:+911234567890');
  // WhatsApp trigger when pressing "Call"
if (callShop) {
  callShop.addEventListener("click", function () {
    // Change to your WhatsApp number
    const phoneNumber = "919554928655"; 
    const message = encodeURIComponent("Hello! I would like to place an order.");
    
    // Open WhatsApp with pre-filled message
    window.open(`https://wa.me/${phoneNumber}?text=${message}`, "_blank");
  });
}

// wishlist skip button
const closeWishlistMobile = qs('#closeWishlistMobile');
if (closeWishlistMobile) {
  closeWishlistMobile.addEventListener('click', () => {
    wishlistPanel.setAttribute('aria-hidden', 'true');
    openWishlistBtn.setAttribute('aria-pressed', 'false');
  });
}


/* keyboard shortcuts */
document.addEventListener('keydown', e=>{
  if(e.key === 'w' && (e.ctrlKey||e.metaKey)){ e.preventDefault(); openWishlistBtn.click(); }
  if(e.key === 'k' && (e.ctrlKey||e.metaKey)){ e.preventDefault(); searchInput.focus(); }
});

/* initialize UI */
function initUI(){
  renderProducts(true);
  renderGallery();
  renderWishlist();
  updateSpotlight();
  mainContent.hidden = false;
}

/* Service worker stub (register if available) */
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('/sw.js').catch(()=>{/* ignore */});
}

/* Intro animation: Netflix-like streaks adapted for cute pastel look */
(function playIntro(){
  const c = introCanvas;
  const ctx = c.getContext('2d');
  function resize(){ c.width = innerWidth; c.height = innerHeight; }
  addEventListener('resize', resize); resize();
  const streaks = [];
  const sparkles = [];
  function spawnStreak(){
    const w = 40 + Math.random()*80;
    const h = 40 + Math.random()*200;
    const x = -w;
    const y = innerHeight*0.3 + (Math.random()-0.5) * innerHeight*0.3;
    const hue = 320 + Math.random()*40;
    const speed = 6 + Math.random()*8;
    streaks.push({x,y,w,h, hue, speed, life:0});
  }
  function spawnSparkle(x,y){
    const v = 1 + Math.random()*2;
    sparkles.push({x,y,rx:(Math.random()-0.5)*6,ry:(Math.random()-0.5)*6, v, a:1});
  }
  let frame=0;
  function loop(){
    ctx.clearRect(0,0,c.width,c.height);
    // fade background slight
    ctx.fillStyle = 'rgba(255,245,250,0.03)';
    ctx.fillRect(0,0,c.width,c.height);
    // create a new streak occasionally during intro sequence
    if(frame%8===0 && streaks.length<16) spawnStreak();
    // draw streaks
    for(let i=streaks.length-1;i>=0;i--){
      const s=streaks[i];
      s.x += s.speed;
      s.life += 1;
      const grad = ctx.createLinearGradient(s.x, s.y, s.x + s.w, s.y + s.h);
      grad.addColorStop(0, `hsla(${s.hue} 80% 70% / 0)`);
      grad.addColorStop(0.2, `hsla(${s.hue} 90% 70% / 0.6)`);
      grad.addColorStop(0.7, `hsla(${s.hue+20} 90% 65% / 0.2)`);
      grad.addColorStop(1, `hsla(${s.hue+40} 90% 60% / 0)`);
      ctx.fillStyle = grad;
      ctx.beginPath();
      ctx.ellipse(s.x, s.y, s.w, s.h, 0, 0, Math.PI*2);
      ctx.fill();
      if(Math.random()>0.92) spawnSparkle(s.x + s.w*0.5, s.y + (Math.random()-0.5)*s.h*0.5);
      if(s.x - s.w > c.width + 200 || s.life > 220) streaks.splice(i,1);
    }
    // draw sparkles
    for(let i=sparkles.length-1;i>=0;i--){
      const sp=sparkles[i];
      sp.x += sp.rx; sp.y += sp.ry; sp.v *= 0.99; sp.a -= 0.01;
      ctx.fillStyle = `rgba(255,255,255,${Math.max(sp.a,0)})`;
      ctx.beginPath(); ctx.arc(sp.x,sp.y, Math.max(1,sp.v*1.8),0,Math.PI*2); ctx.fill();
      if(sp.a<=0) sparkles.splice(i,1);
    }
    frame++;
    if(frame < 240) requestAnimationFrame(loop);
    else endIntroSequence();
  }
  // mascot & title animation
  setTimeout(()=>{ mascot.style.transition='transform 700ms var(--ease),opacity 420ms var(--ease)'; mascot.style.transform='scale(1)'; mascot.style.opacity='1'; }, 280);
  setTimeout(()=>{ introTitle.style.transition='transform 700ms var(--ease),opacity 420ms var(--ease)'; introTitle.style.transform='translateY(0)'; introTitle.style.opacity='1'; }, 900);
  setTimeout(()=>{ introTag.style.transition='transform 700ms var(--ease),opacity 420ms var(--ease)'; introTag.style.transform='translateY(0)'; introTag.style.opacity='1'; }, 1300);
  function endIntroSequence(){
    intro.style.transition='opacity 420ms var(--ease),visibility 420ms var(--ease)';
    intro.style.opacity='0';
    setTimeout(()=>{ intro.style.display='none'; intro.setAttribute('aria-hidden','true'); initUI(); }, 520);
  }
  skipBtn.addEventListener('click', ()=>{ endIntroSequence(); });
  loop();
})();


/* print pickup receipt (printable invoice) */
function printReceipt(items, name){
  const d = new Date().toLocaleString();
  let html = `<html><head><title>Pickup Receipt</title></head><body><h2>Kid's Choice — Pickup Receipt</h2><p>${d}</p><p><strong>${name||'Guest'}</strong></p><table border="1" cellpadding="8" cellspacing="0"><tr><th>Item</th><th>Price</th></tr>`;
  let total=0;
  items.forEach(it=>{ html += `<tr><td>${it.title}</td><td>₹${it.price}</td></tr>`; total+=it.price; });
  html += `<tr><td><strong>Total</strong></td><td><strong>₹${total}</strong></td></tr></table><p>Pickup at Counter. No Home Delivery.</p></body></html>`;
  const w = window.open('','receipt');
  w.document.write(html);
  w.document.close();
  w.print();
}

/* keyboard focus improvements */
document.addEventListener('keydown', e=>{
  if(e.key==='/' && document.activeElement.tagName!=='INPUT'){ e.preventDefault(); searchInput.focus(); }
});

/* small onboarding: if first time, show welcome toast */
// if(!localStorage.getItem('kc_seen_welcome')){ setTimeout(()=> alert('Welcome! Note: We do not provide home delivery — in-store pickup only.'),900); localStorage.setItem('kc_seen_welcome','1'); }

/* init call (if intro skipped earlier) */
if(window.location.hash === '#skipintro'){ qs('#intro').style.display='none'; initUI(); }



</script>
</body>
</html>






